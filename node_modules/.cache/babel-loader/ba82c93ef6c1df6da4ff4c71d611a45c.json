{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tomek\\\\Desktop\\\\ksiazka\\\\src\\\\components\\\\auth.js\";\nimport React from \"react\";\nimport { initialize, attachAuthListener } from \"../utils/firebase\";\nexport const authStates = {\n  INITIAL_VALUE: \"unknown\",\n  LOGGED_IN: \"logged_in\",\n  LOGGED_OUT: \"logged_out\"\n};\nexport function withAuth(WrappedComponent) {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        user: undefined,\n        authState: authStates.INITIAL_VALUE\n      };\n      initialize();\n      setTimeout(() => {\n        this.unsubscribe = attachAuthListener(function (user) {\n          if (user) {\n            this.setState({\n              user: user,\n              authState: authStates.LOGGED_IN\n            });\n          } else {\n            this.setState({\n              user: user,\n              authState: authStates.LOGGED_OUT\n            });\n          }\n        }.bind(this));\n      }, 1000);\n    }\n\n    componentWillUnmount() {// this.unsubscribe();\n    }\n\n    render() {\n      return /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({\n        authState: this.state.authState,\n        user: this.state.user\n      }, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }\n      }));\n    }\n\n  };\n}","map":{"version":3,"sources":["C:/Users/Tomek/Desktop/ksiazka/src/components/auth.js"],"names":["React","initialize","attachAuthListener","authStates","INITIAL_VALUE","LOGGED_IN","LOGGED_OUT","withAuth","WrappedComponent","Component","constructor","props","state","user","undefined","authState","setTimeout","unsubscribe","setState","bind","componentWillUnmount","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,UAAT,EAAqBC,kBAArB,QAA+C,mBAA/C;AAEA,OAAO,MAAMC,UAAU,GAAG;AACxBC,EAAAA,aAAa,EAAE,SADS;AAExBC,EAAAA,SAAS,EAAE,WAFa;AAGxBC,EAAAA,UAAU,EAAE;AAHY,CAAnB;AAMP,OAAO,SAASC,QAAT,CAAkBC,gBAAlB,EAAoC;AACzC,SAAO,cAAcR,KAAK,CAACS,SAApB,CAA8B;AACnCC,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,YAAMA,KAAN;AACA,WAAKC,KAAL,GAAa;AACXC,QAAAA,IAAI,EAAEC,SADK;AAEXC,QAAAA,SAAS,EAAEZ,UAAU,CAACC;AAFX,OAAb;AAKAH,MAAAA,UAAU;AACVe,MAAAA,UAAU,CAAC,MAAM;AACf,aAAKC,WAAL,GAAmBf,kBAAkB,CACnC,UAAUW,IAAV,EAAgB;AACd,cAAIA,IAAJ,EAAU;AACR,iBAAKK,QAAL,CAAc;AACZL,cAAAA,IAAI,EAAEA,IADM;AAEZE,cAAAA,SAAS,EAAEZ,UAAU,CAACE;AAFV,aAAd;AAID,WALD,MAKO;AACL,iBAAKa,QAAL,CAAc;AACZL,cAAAA,IAAI,EAAEA,IADM;AAEZE,cAAAA,SAAS,EAAEZ,UAAU,CAACG;AAFV,aAAd;AAID;AACF,SAZD,CAYEa,IAZF,CAYO,IAZP,CADmC,CAArC;AAeD,OAhBS,EAgBP,IAhBO,CAAV;AAiBD;;AAEDC,IAAAA,oBAAoB,GAAG,CACrB;AACD;;AAEDC,IAAAA,MAAM,GAAG;AACP,0BACE,oBAAC,gBAAD;AACE,QAAA,SAAS,EAAE,KAAKT,KAAL,CAAWG,SADxB;AAEE,QAAA,IAAI,EAAE,KAAKH,KAAL,CAAWC;AAFnB,SAGM,KAAKF,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF;AAOD;;AAxCkC,GAArC;AA0CD","sourcesContent":["import React from \"react\";\n\nimport { initialize, attachAuthListener } from \"../utils/firebase\";\n\nexport const authStates = {\n  INITIAL_VALUE: \"unknown\",\n  LOGGED_IN: \"logged_in\",\n  LOGGED_OUT: \"logged_out\",\n};\n\nexport function withAuth(WrappedComponent) {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        user: undefined,\n        authState: authStates.INITIAL_VALUE,\n      };\n\n      initialize();\n      setTimeout(() => {\n        this.unsubscribe = attachAuthListener(\n          function (user) {\n            if (user) {\n              this.setState({\n                user: user,\n                authState: authStates.LOGGED_IN,\n              });\n            } else {\n              this.setState({\n                user: user,\n                authState: authStates.LOGGED_OUT,\n              });\n            }\n          }.bind(this)\n        );\n      }, 1000);\n    }\n\n    componentWillUnmount() {\n      // this.unsubscribe();\n    }\n\n    render() {\n      return (\n        <WrappedComponent\n          authState={this.state.authState}\n          user={this.state.user}\n          {...this.props}\n        />\n      );\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}